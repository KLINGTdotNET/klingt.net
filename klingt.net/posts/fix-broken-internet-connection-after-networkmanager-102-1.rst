.. title: Fix broken internet connection after NetworkManager 1.0.2-1 update
.. slug: fix-broken-internet-connection-after-networkmanager-102-1
.. date: 2015-05-06 14:08:13 UTC+02:00
.. tags: network, fix, Linux, Arch
.. category: network, fix
.. link: 
.. description: How to fix the broken DNS settings after updating NetworkManager to 1.0.2-1
.. type: text

It was a long time since my last post, but I don't want to keep the following instructions for myself. NetworkManager has `openresolv <https://www.archlinux.org/packages/core/any/openresolv/>`_ as an optional dependency and worked without it flawlessly, till today. If you're lucky then your internet connection will work after the update, because the old nameserver settings in ``/etc/resolv.conf`` are be compatible with the network you are connected to. However, thanks to `this reddit post <https://www.archlinux.org/packages/core/any/openresolv/>`_ I was able to fix the problem.

The first step is to enter a working nameserver in your ``/etc/resolv.conf`` by adding the following line ``nameserver 8.8.8.8`` (which is the public DNS of google). Bytheway, the file should begin with ``# Generated by NetworkManager``, which changes to ``# Generated by resolvconf`` after you finished the instructions.

Now it's time to install ``openresolv`` by using ``pacman -S openresolv`` or whatever package manager you're using. If you don't want to temproarily use the google DNS server, download the `openresolv package <https://www.archlinux.org/packages/core/any/openresolv/>`_ on a computer with working internet connection and install it with: ``pacman -U /path/to/openresolv.xz``. We're almost finished, the last step is to restart NetworkManager using systemctl: ``systemctl restart NetworkManager``. Voil√†, you have a working internet connection again!
